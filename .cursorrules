# Cursor Rules - Gestor de Demandas

## Regras Gerais

### Build e Execução
- NUNCA execute comandos de build (`npm run build`, `bun run build`, `vite build`, etc.)
- Builds são gerenciados pelo pipeline de CI/CD, não pelo desenvolvedor local
- NUNCA execute `npm install` ou `bun install` localmente - as dependências são instaladas dentro do container Docker

### Como Subir o Projeto (Docker)
- Sempre use Docker para rodar o projeto
- Comando para subir: `docker compose up -d --build`
- NÃO é necessário instalar Node.js ou npm localmente
- Acesso: http://localhost:3060 (frontend) e http://localhost:3000 (backend)

### Comandos Docker Úteis
```bash
# Subir projeto
docker compose up -d --build

# Ver logs
docker compose logs -f

# Parar projeto
docker compose down

# Reiniciar
docker compose restart

# Rebuild completo
docker compose down && docker-compose up -d --build
```

### Arquitetura de Rede Docker
- Frontend e Backend se comunicam via hostname Docker "backend"
- Frontend usa "/api" que é redirecionado via proxy (Nginx)
- NÃO hardcode IPs - use sempre os hostnames Docker

### Documentação
- **TODOS** os arquivos de documentação devem estar na pasta `docs/`
- O `README.md` na raiz deve ser apenas um resumo executivo
- Se necessário criar novos documentos, organize em subpastas dentro de `docs/` se fizer sentido
- Mantenha a documentação atualizada com as mudanças de código

### Código e Estilo
- Use TypeScript para todos os arquivos de código
- Siga os padrões de design visual definidos em `docs/frontend/DESIGN_SYSTEM.md`
- Mantenha a responsividade mobile-first em novos componentes

### Arquitetura de Código - Princípios Fundamentais

#### Dimensionamento e Separação de Responsabilidades
- **SEMPRE** dimensione adequadamente os componentes e funções
- **NUNCA** crie arquivos com mais de 300-400 linhas de código executável - se necessário, quebre em componentes menores
  - **O que NÃO conta**: Comentários, documentação (JSDoc/TSDoc), espaços em branco, imports, tipos TypeScript inline extensos
  - **O que CONTA**: Código lógico executável (funções, componentes, lógica de negócio, etc..)
  - **Objetivo**: Manter complexidade ciclomática baixa e facilitar manutenção
  - Se necessário, quebre em componentes menores ou extraia lógica para hooks/utilitários
- **SEMPRE** separe funcionalidades distintas em arquivos/componentes diferentes
- **SEMPRE** extraia lógica complexa para hooks customizados, utilitários ou serviços
- **SEMPRE** identifique oportunidades de reutilização antes de duplicar código

#### Componentes Reutilizáveis
- **PRIORIZE** criar componentes reutilizáveis ao invés de código duplicado
- **SEMPRE** pense em reutilização antes de criar um novo componente
- **SEMPRE** use props bem definidas para tornar componentes flexíveis
- **SEMPRE** documente props e casos de uso de componentes reutilizáveis
- **SEMPRE** coloque componentes reutilizáveis em `frontend/src/components/` (não em `modals/` ou `pages/`)

#### Evitar Códigos Gigantes
- **NUNCA** crie componentes monolíticos - quebre em sub-componentes
- **SEMPRE** extraia lógica de negócio para hooks customizados (`use*`)
- **SEMPRE** extraia funções utilitárias para `frontend/src/utils/`
- **SEMPRE** separe handlers de eventos em funções nomeadas
- **SEMPRE** use `useMemo` e `useCallback` para otimizar, mas não prematuramente

#### Estrutura de Arquivos
- Componentes devem estar em `frontend/src/components/`
- Componentes reutilizáveis em `frontend/src/components/` (ex: `CampoInput`, `ResponsavelSelect`)
- Componentes específicos de página em `frontend/src/components/[feature]/` (ex: `kanban/`, `modals/`)
- Páginas devem estar em `frontend/src/pages/`
- Hooks customizados em `frontend/src/hooks/`
- Tipos TypeScript em `frontend/src/types/`
- Utilitários em `frontend/src/utils/`
- Serviços (API, storage) em `frontend/src/services/`
- Contextos em `frontend/src/contexts/`
- Modais ficam em `frontend/src/components/modals/`
- Componentes UI base (shadcn) em `frontend/src/components/ui/`

#### Estrutura de Código (Backend)
- Servidor Express em `backend/server.js`
- Rotas em `backend/routes/`
- Serviços de negócio em `backend/services/`
- Middlewares em `backend/middlewares/`
- Utilitários em `backend/utils/`
- Dados JSON em `backend/data/` (temporário - migrar para PostgreSQL)

### Padrões de Design Visual
- **SEMPRE** siga os padrões definidos em `docs/frontend/DESIGN_SYSTEM.md`
- Use variáveis CSS do design system (nunca cores hardcoded)
- Siga a estrutura de modais, espaçamento, tipografia e responsividade definidas no documento

### Commits e Versionamento
- Não gere arquivos de build ou dist
- Não commite node_modules ou arquivos temporários
- Não commite arquivos .env com credenciais
